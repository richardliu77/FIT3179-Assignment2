{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800,
    "height": 370,
    "title": "Average Happiness Score of each Region",
    "data": {
      "url": "https://raw.githubusercontent.com/richardliu77/FIT3179-Assignment2/master/datasets/world-happiness-report-2021.csv"
    },
    "transform": [
      {
        "groupby": ["Region"],
        "aggregate": [{"field": "Score", "as": "avg_score", "op": "mean"}]
      }
    ],
    "encoding": {
      "x": {
        "field": "avg_score",
        "type": "quantitative",
        "title": "Happiness Score"
      },
      "y": {"field": "Region", 
      "sort": {"op": "sum", "field": "avg_score"},
      "type": "nominal", 
      "title": "Region"
      }
    },
    "layer": [
      {"mark": "bar", "encoding": {"color": {"field": "Region", "legend": null}}},
      {
        "mark": {
          "type": "text",
          "align": "right",
          "baseline": "middle",
          "dx": 40
        },
        "encoding": {
        "color": {"value": "black"},
          "text": {"field": "avg_score", "type": "quantitative", "format": ".3f"}
        }
      }
    ]
  }